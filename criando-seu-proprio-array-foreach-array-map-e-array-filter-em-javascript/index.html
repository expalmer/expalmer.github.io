<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
    
    <title>Criando seu proprio Array Foreach, Array Map e Array Filter em Javascript | Palmer Oliveira. Juntos Aprendemos Mais!</title>
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/rss.xml">

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />

    <meta name="author" content="@expalmer">
    <meta name="description" content="Aprendendo programação funcional fazendo um foreach, map e filter em javascript.">
    <link rel="canonical" href="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@expalmer">
    <meta name="twitter:domain" content="http://expalmer.github.io">
    <meta name="twitter:image:src" content="http://expalmer.github.io/images/palmer.jpg">
    <meta name="twitter:creator" content="@expalmer">
    <meta name="twitter:title" content="Criando seu proprio Array Foreach, Array Map e Array Filter em Javascript">
    <meta name="twitter:description" content="Aprendendo programação funcional fazendo um foreach, map e filter em javascript.">

    <meta itemprop="name" content="Criando seu proprio Array Foreach, Array Map e Array Filter em Javascript">
    <meta itemprop="description" content="Aprendendo programação funcional fazendo um foreach, map e filter em javascript.">
    <meta itemprop="image" content="http://expalmer.github.io/images/palmer.jpg">
    <meta itemprop="url" content="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript">
    <meta itemprop="author" content="@expalmer">
    <meta itemprop="inLanguage" content="pt-BR">
    <meta itemprop="keywords" content="javascript">

    <meta property="og:locale" content="pt_BR">
    <meta property="og:type" content="article">
    <meta property="og:image" content="http://expalmer.github.io/images/palmer.jpg">
    <meta property="og:title" content="Criando seu proprio Array Foreach, Array Map e Array Filter em Javascript">
    <meta property="og:description" content="Aprendendo programação funcional fazendo um foreach, map e filter em javascript.">
    <meta property="og:url" content="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript">
    <meta property="og:site_name" content="Criando seu proprio Array Foreach, Array Map e Array Filter em Javascript">

    <meta name="google-site-verification" content="BkRIiZn31VGZWd4NBpMhpA8pxdgnSOVwB0jaCFP800M" />

    <link rel="stylesheet" href="/styles/main.min.css">

    <link href="/favico.ico" rel="icon">

  </head>
  <body>
    <header class="header">
      <a href="http://expalmer.github.io" class="header__home" title="Blog do expalmer">
        <figure>
          <img src="http://expalmer.github.io/images/palmer.jpg" alt="Foto de um Panda de Óculos">
        </figure>
        <p>@expalmer</p>
      </a>
      <h1>A Javascript Enthusiast</h1>
      <h2>Juntos Aprendemos Mais :)</h2>
      <nav class="header__menu">
        <ul class="menu">
          <li><a href="http://expalmer.github.io" class="menu__link" title="Posts do Blog">Posts</a></li>
          <li><a href="http://expalmer.github.io/tags/" class="menu__link" title="Tags do Blog">Tags</a></li>
          <li><a href="https://github.com/expalmer" class="menu__link" title="Github do @expalmer">GitHub</a></li>
          <li><a href="http://expalmer.github.io/rss.xml" class="menu__link" title="RSS do Blog">RSS</a></li>
        </ul>
      </nav>
    </header>

    
  <main class="main">
    <div class="limiter">
      <article class="article" itemscope itemtype="https://schema.org/Blog">
        <header>
          <time class="post__time" itemprop="datePublished" content="August 11, 2015" datetime="August 11, 2015">August 11, 2015</time>
          <h1 class="post__title">Criando seu próprio Array Foreach, Array Map e Array Filter em Javascript</h1>
          <iside class="post__related">
            
            <a href="http://expalmer.github.io/tags/javascript" class="atag javascript" title="Veja mais posts sobre javascript">javascript</a>
            
          </iside>
        </header>
        <p>Vou postar uma série de <strong>Criando seu próprio alguma coisa</strong> em javascript para deixar registrado meus estudos e espero que sirva de ajuda para você.</p>
<h2 id="estudando-programa-o-funcional-em-javascript">Estudando Programação Funcional em Javascript</h2>
<p>Javascript é uma linguagem considerada <strong>Híbrida</strong>, pois é possível aplicar paradigmas de programação tais como <a href="https://pt.wikipedia.org/wiki/Programa%C3%A7%C3%A3o_imperativa">Imperativa</a>, <a href="https://pt.wikipedia.org/wiki/Programa%C3%A7%C3%A3o_declarativa">Declarativa</a> e <a href="https://pt.wikipedia.org/wiki/Programa%C3%A7%C3%A3o_funcional">Funcional</a>.</p>
<p>No caso tenho estudado <strong>Programação Funcional</strong> e com isso aprendi que dominando funções como <code>map</code>, <code>filter</code>, <code>reduce</code>, <code>mergeAll</code> e <code>zip</code>, fará você ter super poderes.</p>
<p>Nas palavras de <a href="https://github.com/jhusain">Jafar Husain</a> da NetFlix: <em>&quot;Se você aprender essas 5 funções, seu código vai se tornar menor, mais auto descritivo e mais durável&quot;</em>.</p>
<p>Vamos começar a aprender esses truques. Neste posts vamos ver <strong>map</strong> e <strong>filter</strong>, mas vou incluir o <strong>forEach</strong> antes de tudo:</p>
<h3 id="considere-esse-array-de-objetos">Considere esse array de objetos</h3>
<pre><code class="lang-javascript">var lordOfTheRings = [
  { name: &quot;Galadriel&quot;, race: &quot;Elves&quot;, weapons: [ &quot;Elven Magic&quot;, &quot;Nenya&quot; ] },
  { name: &quot;Legolas&quot;,   race: &quot;Elves&quot;, weapons: [ &quot;Bow&quot;, &quot;Knife&quot; ] },
  { name: &quot;Gandalf&quot;,   race: &quot;Maiar&quot;, weapons: [ &quot;Glamdring&quot;, &quot;Wizard Staff&quot;, &quot;Sword&quot; ] },
  { name: &quot;Radagast&quot;,  race: &quot;Maiar&quot;, weapons: [ &quot;Powers of the Maiar&quot;, &quot;Wizard Staff&quot; ] },
  { name: &quot;Aragorn&quot;,   race: &quot;Men&quot;,   weapons: [ &quot;Anduril&quot;, &quot;Sword&quot; ] },
  { name: &quot;Sauron&quot;,    race: &quot;Ainur&quot;, weapons: [ &quot;One Ring&quot;, &quot;Sword&quot;, &quot;Powers of the Maiar&quot; ] },
  { name: &quot;Faramir&quot;,   race: &quot;Men&quot;,   weapons: [ &quot;Bow&quot;, &quot;Sword&quot; ] }
];
</code></pre>
<p>Você precisa mostrar apenas o <strong>name</strong> e a <strong>race</strong> de cada personagem, então vamos usar um <code>for</code>.</p>
<pre><code class="lang-javascript">var results = [];
var len = lordOfTheRings.length;
for (var i = 0; i &lt; len; i++) {
  results.push( { name: lordOfTheRings[i].name, race: lordOfTheRings[i].race } );
}
console.log( results );
/*
[ { name: &#39;Galadriel&#39;, race: &#39;Elves&#39; },
  { name: &#39;Legolas&#39;, race: &#39;Elves&#39; },
  { name: &#39;Gandalf&#39;, race: &#39;Maiar&#39; },
  { name: &#39;Radagast&#39;, race: &#39;Maiar&#39; },
  { name: &#39;Aragorn&#39;, race: &#39;Men&#39; },
  { name: &#39;Sauron&#39;, race: &#39;Ainur&#39; },
  { name: &#39;Faramir&#39;, race: &#39;Men&#39; } ]
*/
</code></pre>
<p>Vamos implementar nosso próprio <code>forEach</code>.</p>
<h2 id="foreach">forEach</h2>
<pre><code class="lang-javascript">// https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach
// Para cada item do array é chamado o callback com 3 argumentos
// 1: O this[ i ], 2: o index atual, 3: o array inteiro
Array.prototype.forEach = function ( callback ) {
  var len = this.length; // tamanho do nosso array
  for( var i = 0; i &lt; len; i++ ) {
    callback( this[i], i, this );
  }
};
</code></pre>
<p><strong>OBS:</strong> Falar sobre <code>prototype</code> é coisa para outro post, embora tenham muitos outros posts pela internet explicando. Mas vamos a parte que nos interessa. Quando colocamos no prototype do objeto <strong>Array</strong> a função <strong>forEach</strong>, isso fará com que todos arrays tenham acesso a essa função. Note que o <strong>this</strong> é o próprio array.</p>
<p>Vamos usar nossa implementação.</p>
<pre><code class="lang-javascript">var results = [];
lordOfTheRings.forEach( function( item ) {
  results.push( { name: item.name, race: item.race } );
});
console.log( results );

/*
[ { name: &#39;Galadriel&#39;, race: &#39;Elves&#39; },
  { name: &#39;Legolas&#39;, race: &#39;Elves&#39; },
  { name: &#39;Gandalf&#39;, race: &#39;Maiar&#39; },
  { name: &#39;Radagast&#39;, race: &#39;Maiar&#39; },
  { name: &#39;Aragorn&#39;, race: &#39;Men&#39; },
  { name: &#39;Sauron&#39;, race: &#39;Ainur&#39; },
  { name: &#39;Faramir&#39;, race: &#39;Men&#39; } ]
*/

// Só para você testar usando as chaves ;)
lordOfTheRings.forEach( function( item, index ) {
  console.log( index, item.name  );
});
/*
  0 &#39;=&gt;&#39; &#39;Galadriel&#39;
  1 &#39;=&gt;&#39; &#39;Legolas&#39;
  2 &#39;=&gt;&#39; &#39;Gandalf&#39;
  3 &#39;=&gt;&#39; &#39;Radagast&#39;
  4 &#39;=&gt;&#39; &#39;Aragorn&#39;
  5 &#39;=&gt;&#39; &#39;Sauron&#39;
  6 &#39;=&gt;&#39; &#39;Faramir&#39;
*/
</code></pre>
<p>Olha aí cara!! Você mesmo implementou seu próprio forEach, vamos adiante!</p>
<p>Imagine que agora você precise de um novo array de objetos apenas contendo  <strong>name</strong> e <strong>weapons</strong>.
Com <strong>forEach</strong> faríamos assim:</p>
<pre><code class="lang-javascript"> var result = [];
 lordOfTheRings.forEach( function( item ) {
    result.push( { name: item.name, weapons: item.weapons } );
 });
 console.log(result);
/*
[ { name: &#39;Galadriel&#39;, weapons: [ &#39;Elven Magic&#39;, &#39;Nenya&#39; ] },
  { name: &#39;Legolas&#39;, weapons: [ &#39;Bow&#39;, &#39;Knife&#39; ] },
  { name: &#39;Gandalf&#39;, weapons: [ &#39;Glamdring&#39;, &#39;Wizard Staff&#39;, &#39;Sword&#39; ] },
  { name: &#39;Radagast&#39;, weapons: [ &#39;Powers of the Maiar&#39;, &#39;Wizard Staff&#39; ] },
  { name: &#39;Aragorn&#39;, weapons: [ &#39;Anduril&#39;, &#39;Sword&#39; ] },
  { name: &#39;Sauron&#39;, weapons: [ &#39;One Ring&#39;, &#39;Sword&#39;, &#39;Powers of the Maiar&#39; ] },
  { name: &#39;Faramir&#39;, weapons: [ &#39;Bow&#39;, &#39;Sword&#39; ] } ]
*/
</code></pre>
<h2 id="map">map</h2>
<p>Agora sim, vamos criar nosso array <strong>map</strong>, que irá retornar um novo array conforme nossa necessidade. Essa função é extremamente útil, pois com ela futuramente você verá como podemos encadear funções.</p>
<pre><code class="lang-javascript">// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map
// Mesmo coisa que o forEach, mas guardamos os dados para retornar após o &quot;for&quot;
Array.prototype.map = function( callback ) {
  var results = [];
  var len = this.length;
  for( var i = 0; i &lt; len; i++ ) {
    results.push( callback( this[i], i, this ) );
  }
  return results; // &lt;= retornamos aqui
}
</code></pre>
<p>Agora usando nosso <strong>map</strong>.</p>
<pre><code class="lang-javascript">var result = lordOfTheRings.map( function ( item ) {
  return { name: item.name, weapons: item.weapons };
});
console.log( result );
/*
[ { name: &#39;Galadriel&#39;, weapons: [ &#39;Elven Magic&#39;, &#39;Nenya&#39; ] },
  { name: &#39;Legolas&#39;, weapons: [ &#39;Bow&#39;, &#39;Knife&#39; ] },
  { name: &#39;Gandalf&#39;, weapons: [ &#39;Glamdring&#39;, &#39;Wizard Staff&#39;, &#39;Sword&#39; ] },
  { name: &#39;Radagast&#39;, weapons: [ &#39;Powers of the Maiar&#39;, &#39;Wizard Staff&#39; ] },
  { name: &#39;Aragorn&#39;, weapons: [ &#39;Anduril&#39;, &#39;Sword&#39; ] },
  { name: &#39;Sauron&#39;, weapons: [ &#39;One Ring&#39;, &#39;Sword&#39;, &#39;Powers of the Maiar&#39; ] },
  { name: &#39;Faramir&#39;, weapons: [ &#39;Bow&#39;, &#39;Sword&#39; ] } ]
*/
</code></pre>
<p>Até aqui tudo bem ? Viu que o <strong>map</strong> retorna um novo array! Seguindo em frente vamos para exemplos mais interessantes.</p>
<p>Agora queremos listar apenas os <strong>Elfos</strong>!
Para isso teremos que usar um <strong>forEach</strong>, fazer um <strong>if</strong> e guardar os resultados que queremos:</p>
<pre><code class="lang-javascript">var elfos = [];
lordOfTheRings.forEach( function ( item ) {
  if( item.race === &quot;Elves&quot; ) {
    elfos.push( { name: item.name, race: item.race } );
  }
});
console.log( elfos );
/*
  [ { name: &#39;Galadriel&#39;, race: &#39;Elves&#39; },
    { name: &#39;Legolas&#39;, race: &#39;Elves&#39; } ]
*/
</code></pre>
<p>Vamos criar nossa função <strong>filter</strong>, ela será responsável de filtrar os dados que desejamos. O que ela faz é percorrer cada item do array e se o retorno for <strong>verdadeiro</strong> o item é acumulado.</p>
<h2 id="filter">filter</h2>
<pre><code class="lang-javascript">//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter
Array.prototype.filter = function ( callback ) {
  var results = [];
  var len = this.length;
  for( var i = 0; i &lt; len; i++ ) {
    if ( callback( this[i] ) ) { // se for verdadeiro é acumulado
      results.push( this[i] );
    }
  }
  return results;
};
</code></pre>
<p>Aqui já entramos nas utilidades de encadear funções, vamos refazer nosso exemplo com <strong>filter</strong> e <strong>map</strong>.</p>
<pre><code class="lang-javascript">var elfos = lordOfTheRings
              .filter( function ( item ) {
                return item.race === &quot;Elves&quot;;
              })
              .map( function( elfos ) {
                return { name: elfos.name, race: elfos.race };
              });
console.log( elfos );

/*
  [ { name: &#39;Galadriel&#39;, race: &#39;Elves&#39; },
    { name: &#39;Legolas&#39;, race: &#39;Elves&#39; } ]
*/
</code></pre>
<p>Vamos fazer mais uns testezinhos com <strong>map</strong> e <strong>filter</strong> para fixar bem na mente.</p>
<pre><code class="lang-javascript">var numbers = [ 1,2,3,4,5,6,7,8,9 ];
// mostrandos só os numeros pares
var even = numbers.filter( function( n ) {
  return n % 2 === 0; //
});
console.log(even);
/*
  [ 2, 4, 6, 8 ]
*/

// pegue os numeros impares e multiplique por 10
var odd = numbers
            .filter( function( n ) {
              return n % 2; //
            })
            .map( function( n ) {
              return n * 100;
            })
console.log(odd);
/*
  [ 100, 300, 500, 700, 900 ]
*/
</code></pre>
<p>Até aqui já dá para perceber a variedade de coisas que podemos fazer apenas com <code>map</code> e <code>filter</code>. E o melhor de tudo é que você mesmo criou cada uma dessas funções :).</p>
<h2 id="finalizando">Finalizando</h2>
<p>Para finalizar, vamos fazer mais um exemplo, e logo abaixo coloco 2 desafios para você.</p>
<pre><code class="lang-javascript">// Só quero quem é Maiar ou Men, e a quantidade total de weapons de cada um.
// Retorne um array de objetos somente com as chaves {name},{totalWeapons}
var result =  lordOfTheRings
                .filter( function( item ) {
                  return item.race === &quot;Maiar&quot; || item.race === &quot;Men&quot;;
                })
                .map( function( item ) {
                  return { name: item.name, totalWeapons: item.weapons.length };
                });
console.log(result);

/*
  [ { name: &#39;Gandalf&#39;, totalWeapons: 3 },
    { name: &#39;Radagast&#39;, totalWeapons: 2 },
    { name: &#39;Aragorn&#39;, totalWeapons: 2 },
    { name: &#39;Faramir&#39;, totalWeapons: 2 } ]
*/
</code></pre>
<h2 id="desafio-1">Desafio 1</h2>
<p>Me retorne todos ( menos o Sauron ) que possuam a quantidade total de armas maior que 2.</p>
<p>O array de objetos deve ser neste formato:</p>
<pre><code class="lang-javascript">/*
  [ { name: &#39;Name&#39;, totalWeapons: 0 }  ]
*/
</code></pre>
<h2 id="desafio-2">Desafio 2</h2>
<p>Me retorne somente aqueles que possuam mais de 2 armas e entre elas deve conter uma &quot;Sword&quot;.</p>
<p>Só use <code>map</code> e <code>filter</code>, não pode usar <code>if</code>.</p>
<p>O array de objetos deve ser neste formato:</p>
<pre><code class="lang-javascript">/*
  [ { name: &#39;Name&#39;, race: &quot;Race&quot;, totalWeapons: 0 } ]
*/
</code></pre>
<p>Poste nos comentários as soluções dos desafios.</p>
<p>No próximo post vamos implementar o <strong>reduce</strong>.</p>
<p>Espero que tenham gostado. That&#39;s it !</p>

      </article>
      <!-- COMMENTS -->
      <section id="comments">
        <div id="disqus_thread"></div>
        <script data-cfasync="true" type="text/javascript">
            var disqus_shortname = 'expalmer';
            var disqus_url = 'http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript/';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </section>
    </div>
  </main>


    <footer class="footer">
      <p>Made with <a href="http://www.metalsmith.io/" title="Metalsmith">Metalsmith</a>. View <a href="https://github.com/expalmer/expalmer.github.io-files" title="Source">Source</a></p>
    </footer>
    <script src="/scripts/main.min.js"></script>
  </body>
</html>