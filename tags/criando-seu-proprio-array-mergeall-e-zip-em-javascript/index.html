<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
    
    <title>Criando seu proprio Array MergeAll e Zip em Javascript | Palmer Oliveira. Juntos Aprendemos Mais!</title>
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/rss.xml">

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />

    <meta name="author" content="@expalmer">
    <meta name="description" content="Aprendendo programação funcional criando funções auxiliares mergeAll e zip em javascript.">
    <link rel="canonical" href="http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@expalmer">
    <meta name="twitter:domain" content="http://expalmer.github.io">
    <meta name="twitter:image:src" content="http://expalmer.github.io/images/palmer.jpg">
    <meta name="twitter:creator" content="@expalmer">
    <meta name="twitter:title" content="Criando seu proprio Array MergeAll e Zip em Javascript">
    <meta name="twitter:description" content="Aprendendo programação funcional criando funções auxiliares mergeAll e zip em javascript.">

    <meta itemprop="name" content="Criando seu proprio Array MergeAll e Zip em Javascript">
    <meta itemprop="description" content="Aprendendo programação funcional criando funções auxiliares mergeAll e zip em javascript.">
    <meta itemprop="image" content="http://expalmer.github.io/images/palmer.jpg">
    <meta itemprop="url" content="http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript">
    <meta itemprop="author" content="@expalmer">
    <meta itemprop="inLanguage" content="pt-BR">
    <meta itemprop="keywords" content="javascript">

    <meta property="og:locale" content="pt_BR">
    <meta property="og:type" content="article">
    <meta property="og:image" content="http://expalmer.github.io/images/palmer.jpg">
    <meta property="og:title" content="Criando seu proprio Array MergeAll e Zip em Javascript">
    <meta property="og:description" content="Aprendendo programação funcional criando funções auxiliares mergeAll e zip em javascript.">
    <meta property="og:url" content="http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript">
    <meta property="og:site_name" content="Criando seu proprio Array MergeAll e Zip em Javascript">

    <meta name="google-site-verification" content="BkRIiZn31VGZWd4NBpMhpA8pxdgnSOVwB0jaCFP800M" />

    <link rel="stylesheet" href="/styles/main.min.css">

    <link href="/favico.ico" rel="icon">

  </head>
  <body>
    <header class="header">
      <a href="http://expalmer.github.io" class="header__home" title="Blog do expalmer">
        <figure>
          <img src="http://expalmer.github.io/images/palmer.jpg" alt="Foto de um Panda de Óculos">
        </figure>
        <p>@expalmer</p>
      </a>
      <h1>A Javascript Enthusiast</h1>
      <h2>Juntos Aprendemos Mais :)</h2>
      <nav class="header__menu">
        <ul class="menu">
          <li><a href="http://expalmer.github.io" class="menu__link" title="Posts do Blog">Posts</a></li>
          <li><a href="http://expalmer.github.io/tags/" class="menu__link" title="Tags do Blog">Tags</a></li>
          <li><a href="https://github.com/expalmer" class="menu__link" title="Github do @expalmer">GitHub</a></li>
          <li><a href="http://expalmer.github.io/rss.xml" class="menu__link" title="RSS do Blog">RSS</a></li>
        </ul>
      </nav>
    </header>

    
  <main class="main">
    <div class="limiter">
      <article class="article" itemscope itemtype="https://schema.org/Blog">
        <header>
          <time class="post__time" itemprop="datePublished" content="December 28, 2015" datetime="December 28, 2015">December 28, 2015</time>
          <h1 class="post__title">Criando seu próprio Array MergeAll e Zip em Javascript</h1>
          <iside class="post__related">
            
            <a href="http://expalmer.github.io/tags/javascript" class="atag javascript" title="Veja mais posts sobre javascript">javascript</a>
            
          </iside>
        </header>
        <p>Neste post criaremos duas funções auxiliares chamadas de <code>mergeAll</code> e <code>zip</code>. Com elas teremos mais opções ao usar funções encadeadas junto com <strong>map</strong>, <strong>filter</strong> e <strong>reduce</strong>.</p>
<h2 id="para-que-serve-o-mergeall-">Para que serve o mergeAll ?</h2>
<p>Essa função serve para juntar um array multidimencional, ou seja, um array que contém outro array em cada um de seus itens. Por exemplo se temos um array assim <code>[ [1,2,3], [4,5,6], [7,8,9] ]</code>, e para que ele fique assim <code>[1,2,3,4,5,6,7,8,9]</code>, precisamos juntá-los.</p>
<h2 id="mergeall">mergeAll</h2>
<pre><code class="lang-javascript">Array.prototype.mergeAll = function() {
    var results = [];
    this.forEach(function(subArray) {
        subArray.forEach(function( x ) {
            results.push( x );
        });
    });
    return results;
};
</code></pre>
<p>Aqui pegamos os resultados usando nosso anteriormente criado <a href="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript/"><code>forEach</code></a>, e iteramos cada um dos itens cancatenando-os, e no final temos um único array.</p>
<h3 id="pegando-apenas-os-nomes">Pegando apenas os nomes</h3>
<p>Vamos usar esses dados de exemplo.</p>
<pre><code class="lang-javascript">var lordOfTheRings = [
  {
    race: &#39;Elves&#39;,
    characters: [
      {
        name: &quot;Galadriel&quot;,
        weapons: [ &quot;Elven Magic&quot;, &quot;Nenya&quot; ]
      },
      {
        name: &quot;Legolas&quot;,
        weapons: [ &quot;Bow&quot;, &quot;Knife&quot; ]
      }
    ]
  },
  {
    race: &#39;Maiar&#39;,
    characters: [
      {
        name: &quot;Gandalf&quot;,
        weapons: [ &quot;Glamdring&quot;, &quot;Wizard Staff&quot;, &quot;Sword&quot; ]
      },
      {
        name: &quot;Radagast&quot;,
        weapons: [ &quot;Powers of the Maiar&quot;, &quot;Wizard Staff&quot; ]
      }
    ]
  },
  {
    race: &#39;Men&#39;,
    characters: [
      {
        name: &quot;Aragorn&quot;,
        weapons: [ &quot;Anduril&quot;, &quot;Sword&quot; ]
      },
      {
        name: &quot;Faramir&quot;,
        weapons: [ &quot;Bow&quot;, &quot;Sword&quot; ]
      }
    ]
  },
  {
    race: &quot;Ainur&quot;,
    characters: [
      {
        name: &quot;Sauron&quot;,
        weapons: [ &quot;One Ring&quot;, &quot;Sword&quot;, &quot;Powers of the Maiar&quot; ]
      }
    ]
  }
];
</code></pre>
<p>O que preciso é criar um array com todos os nomes de cada um dos personagens que estão separados por raça.</p>
<p>Vamos primeiramente fazer assim:</p>
<pre><code class="lang-javascript">var names = lordOfTheRings
  .map(function(item){
    return item.characters
      .map(function( character ) {
        return character.name;
      });
  });

console.log(names);
/*
[ 
  [ &#39;Galadriel&#39;, &#39;Legolas&#39; ],
  [ &#39;Gandalf&#39;, &#39;Radagast&#39; ],
  [ &#39;Aragorn&#39;, &#39;Faramir&#39; ],
  [ &#39;Sauron&#39; ] 
]
*/
</code></pre>
<p>Note que temos 4 arrays dentro de um array... então usamos o <code>mergeAll</code>.</p>
<pre><code class="lang-javascript">var names = lordOfTheRings
  .map(function(item){
    return item.characters
      .map(function( character ) {
        return character.name;
      });
  }).mergeAll();

console.log(names);
/*
[ &#39;Galadriel&#39;,
  &#39;Legolas&#39;,
  &#39;Gandalf&#39;,
  &#39;Radagast&#39;,
  &#39;Aragorn&#39;,
  &#39;Faramir&#39;,
  &#39;Sauron&#39; ]
*/
</code></pre>
<p>No final de nosso <strong>map</strong>, chamamos a função <strong>mergeAll</strong>, e agora sim temos um único array :)</p>
<h2 id="para-que-serve-o-zip-">Para que serve o zip ?</h2>
<p>Essa função serve para iterar dois arrays ao mesmo tempo, aplicando uma função callback para ambos. Isso é útil quando temos dois arrays que possuem alguma ligação em relação aos seus indíces.</p>
<h2 id="zip">zip</h2>
<pre><code class="lang-javascript">Array.zip = function(left, right, callback) {
  var len = Math.min(left.length, right.length); // pegamos o menor tamanho
  var results = [];
  for( var i = 0; i &lt; len; i++ ) {
    results.push( callback(left[i], right[i]) );
  }
  return results;
};
</code></pre>
<p>O que fazemos aqui é receber 3 argumentos, <strong>(1)</strong> o primeiro array, <strong>(2)</strong> o segundo array e <strong>(3)</strong> a função callback que vai iterar um por um dos itens dos array.</p>
<p>Note que se os arrays forem de tamanhos diferentes, ele irá pegar o tamanho do array menor. E também que essa função não vai no prototype, pois passamos duas referências de objetos/arrays diferentes.</p>
<h3 id="ligando-dois-arrays">Ligando dois arrays</h3>
<p>Imagine esse cenário, onde no primeiro array, tenho os personagens e no segundo tenho as armas. O que eu preciso, é um novo objeto que pegue do primeito array apenas o <code>name</code>, e pegue do segundo array apenas a último item de <code>weapons</code>.</p>
<pre><code class="lang-javascript">var characters = [
  { name: &quot;Galadriel&quot; },
  { name: &quot;Legolas&quot; },
  { name: &quot;Gandalf&quot; },
  { name: &quot;Radagast&quot; },
  { name: &quot;Aragorn&quot; },
  { name: &quot;Faramir&quot; },
  { name: &quot;Sauron&quot; }
];

var weapons = [
  [ &quot;Elven Magic&quot;, &quot;Nenya&quot; ],
  [ &quot;Bow&quot;, &quot;Knife&quot; ],
  [ &quot;Glamdring&quot;, &quot;Wizard Staff&quot;, &quot;Sword&quot; ],
  [ &quot;Powers of the Maiar&quot;, &quot;Wizard Staff&quot; ],
  [ &quot;Anduril&quot;, &quot;Sword&quot; ],
  [ &quot;Bow&quot;, &quot;Sword&quot; ],
  [ &quot;One Ring&quot;, &quot;Sword&quot;, &quot;Powers of the Maiar&quot; ]
];

var joined = Array.zip( characters, weapons, function( character, weapons ) {
  return { name: character.name, weapon: weapons.pop() };
});

console.log(joined);

/*
[ 
  { name: &#39;Galadriel&#39;, weapon: &#39;Nenya&#39; },
  { name: &#39;Legolas&#39;, weapon: &#39;Knife&#39; },
  { name: &#39;Gandalf&#39;, weapon: &#39;Sword&#39; },
  { name: &#39;Radagast&#39;, weapon: &#39;Wizard Staff&#39; },
  { name: &#39;Aragorn&#39;, weapon: &#39;Sword&#39; },
  { name: &#39;Faramir&#39;, weapon: &#39;Sword&#39; },
  { name: &#39;Sauron&#39;, weapon: &#39;Powers of the Maiar&#39; } 
]
*/
</code></pre>
<p>Pronto, agora temos um único objeto.</p>
<p>Agora que temos todas as funções     que precisamos, <a href="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript/">map</a>, <a href="http://expalmer.github.io/criando-seu-proprio-array-foreach-array-map-e-array-filter-em-javascript/">filter</a>, <a href="http://expalmer.github.io/criando-seu-proprio-array-reduce-em-javascript/">reduce</a>, <a href="http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript/">mergeAll</a> e <a href="http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript/">zip</a>, nos próximos posts veremos como usá-las juntas para criarmos consultas interessantes e super úteis.</p>
<p>Espero que tenham gostado. That&#39;s it !</p>

      </article>
      <!-- COMMENTS -->
      <section id="comments">
        <div id="disqus_thread"></div>
        <script data-cfasync="true" type="text/javascript">
            var disqus_shortname = 'expalmer';
            var disqus_url = 'http://expalmer.github.io/criando-seu-proprio-array-mergeall-e-zip-em-javascript/';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </section>
    </div>
  </main>


    <footer class="footer">
      <p>Made with <a href="http://www.metalsmith.io/" title="Metalsmith">Metalsmith</a>. View <a href="https://github.com/expalmer/expalmer.github.io-files" title="Source">Source</a></p>
    </footer>
    <script src="/scripts/main.min.js"></script>
  </body>
</html>